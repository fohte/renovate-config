{
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',

  packageRules: [
    {
      matchManagers: ['npm', 'bun'],
      matchDepTypes: ['devDependencies'],
      matchUpdateTypes: ['patch'],
      groupName: 'devDependencies (non-major)',
      automerge: true,
    },
    {
      matchManagers: ['npm', 'bun'],
      matchUpdateTypes: ['patch', 'pin', 'digest'],
      automerge: true,
    },
    // Group Bun runtime and its type definitions together
    // to ensure compatibility between runtime and types
    {
      matchManagers: ['mise'],
      matchPackageNames: ['bun'],
      groupName: 'bun',
    },
    {
      matchManagers: ['npm', 'bun'],
      matchPackageNames: ['@types/bun', 'bun-types'],
      groupName: 'bun',
    },
    {
      // @cloudflare/workers-types uses date-based versioning (<major>.<YYYYMMDD>.<patch>),
      // but we can safely automerge since CI type checking ensures compatibility
      matchPackageNames: ['@cloudflare/workers-types'],
      matchUpdateTypes: ['minor', 'patch'],
      automerge: true,
    },
  ],
}
